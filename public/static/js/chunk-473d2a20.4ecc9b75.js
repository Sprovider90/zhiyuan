(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-473d2a20"],{"03a5":function(t,i,a){},"0495":function(t,i,a){"use strict";var s=a("fb87"),e=a.n(s);e.a},"0acf":function(t,i,a){"use strict";var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{ref:"pieChart",staticClass:"pie-chart"})},e=[],n=a("7f22"),o=a.n(n),r={name:"largePieChart",props:["detail"],data:function(){return{pieChart:null}},mounted:function(){this.pieChart=o.a.init(this.$refs.pieChart)},updated:function(){},methods:{initRing:function(){var t=0,i="";3===this.detail.tag?(i="#fb4542",t=90):2===this.detail.tag?(i="#ff9d00",t=60):1===this.detail.tag?(i="#40c133",t=20):(i="#40c133",t=0),this.pieChart.setOption({series:[{name:"",type:"pie",radius:["85%","100%"],hoverAnimation:!1,cursor:"auto",label:{show:!1,position:"center"},data:[{value:t,itemStyle:{color:i}},{value:100-t,itemStyle:{color:"#393a56"}}]}]})}},watch:{detail:function(t){this.initRing()}}},l=r,c=(a("a58e"),a("9ca4")),g=Object(c["a"])(l,s,e,!1,null,"12eef0ab",null);i["a"]=g.exports},1300:function(t,i,a){},"13a7":function(t,i,a){"use strict";var s=a("1300"),e=a.n(s);e.a},"1b99":function(t,i,a){"use strict";a.r(i);var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"largeWarningDetail"},[a("div",{staticClass:"largeWarning-left"},[a("div",{staticClass:"chart-box"},[a("gaugeChart",{attrs:{positionInfo:t.positionInfo}})],1),t._v(" "),a("ul",{staticClass:"warning-term-list"},t._l(t.typeList,(function(i,s){return i.tag?a("li",{key:s,staticClass:"item"},[a("div",{staticClass:"pie-chart-box"},[a("largePieChart",{attrs:{detail:i}}),t._v(" "),a("div",{staticClass:"center-text"},[a("p",[t._v(t._s(i.value))]),t._v(" "),a("p",[1===i.tag?a("span",[t._v("优秀")]):2===i.tag?a("span",[t._v("合格")]):3===i.tag?a("span",[t._v("污染")]):a("span",[t._v("未知")])])])],1),t._v(" "),a("p",{staticClass:"item-name"},[t._v(t._s(i.name))])]):t._e()})),0)]),t._v(" "),a("div",{staticClass:"largeWarning-right"},[a("div",{staticClass:"right-title"},[t._v("预警警报")]),t._v(" "),a("ul",{staticClass:"warning-list"},t._l(t.warningList,(function(i){return a("li",{key:i.id,staticClass:"warning-item",on:{click:function(a){return t.handleShowImprove(i)}}},[a("largeWarningItem",{attrs:{info:i}})],1)})),0)]),t._v(" "),a("el-dialog",{attrs:{title:"改善建议",visible:t.suggestVisible,"close-on-click-modal":!1,width:"1114px"},on:{"update:visible":function(i){t.suggestVisible=i}}},[a("newImproveBox",{attrs:{warningMsgList:t.warningMsgList},on:{close:function(i){t.suggestVisible=!1},showBig:t.handleShowBigImg}})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.bigImgVisible},on:{"update:visible":function(i){t.bigImgVisible=i}}},[a("img",{staticStyle:{display:"block"},attrs:{width:"100%",src:t.bigImgUrl,alt:""}})])],1)},e=[],n=(a("cc57"),a("7f22"),a("6d42")),o=a("0acf"),r=a("3e4a"),l=(a("dc12"),a("9d8d")),c=a("b775"),g={name:"largeWarningDetail",data:function(){return{gagueChart:null,suggestVisible:!1,warningList:[],typeList:[{name:"甲醛",type:"formaldehyde",value:0,tag:1},{name:"温度",type:"temperature",value:0,tag:1},{name:"湿度",type:"humidity",value:0,tag:1},{name:"TVOC",type:"TVOC",value:0,tag:1},{name:"PM2.5",type:"PM25",value:0,tag:1},{name:"CO2",type:"CO2",value:0,tag:1}],warningMsgList:[],positionInfo:{},firstPositionId:"",bigImgVisible:!1,bigImgUrl:""}},created:function(){this.getEarlywarningList()},mounted:function(){},methods:{getChartMsgList:function(t){var i=this;Object(c["a"])(this.ajaxUrl.warningMsgist,{warnig_id:t,pageSize:99999,page:1},"get").then((function(t){i.warningMsgList=t.data})).catch((function(t){console.log(t)}))},handleShowBigImg:function(t){this.bigImgUrl=t,this.bigImgVisible=!0},getEarlywarningList:function(){var t=this;Object(c["a"])(this.ajaxUrl.earlyWarningList,{page:1,pageSize:12},"get").then((function(i){t.warningList=i.data.slice(0,12),t.firstPositionId=t.warningList[0]&&t.warningList[0].projects_positions.id,t.firstPositionId&&t.getNewPositionData(t.firstPositionId)})).catch((function(t){console.log(t)}))},getNewPositionData:function(t){var i=this;return Object(c["a"])(this.ajaxUrl.getNewPositionData,{monitorId:t},"get").then((function(t){var a=JSON.parse(JSON.stringify(i.typeList));i.positionInfo={project_name:t.project.name,area_name:t.area.area_name,position_name:t.position.name,tag:t.position.tag};var s=t.data[0];i.typeList=a.map((function(t){return t.value=s[t.type],t.tag=s[t.type+"_tag"],t}))})).catch((function(t){console.log(t)}))},handleShowImprove:function(t){t.isnew&&(this.suggestVisible=!0,this.getChartMsgList(t.id))}},components:{largeWarningItem:n["a"],largePieChart:o["a"],gaugeChart:r["a"],newImproveBox:l["a"]}},u=g,f=(a("331f"),a("9ca4")),p=Object(f["a"])(u,s,e,!1,null,"58547ce6",null);i["default"]=p.exports},"29b7":function(t,i,a){},"331f":function(t,i,a){"use strict";var s=a("a99a"),e=a.n(s);e.a},"3e4a":function(t,i,a){"use strict";var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"gaugeChart"},[a("div",{staticClass:"gaugeBox"},[a("div",{ref:"gaugeChart",style:{width:"100%",height:"100%"}})]),t._v(" "),a("div",{staticClass:"address"},[a("p",{staticClass:"name",attrs:{title:t.positionInfo.position_name}},[t._v(t._s(t.positionInfo.position_name))]),t._v(" "),a("p",{staticClass:"address-info"},[t._v(t._s(t.positionInfo.project_name)+" | "+t._s(t.positionInfo.area_name))])])])},e=[],n=a("7f22"),o=a.n(n),r={name:"gaugeChart",props:["positionInfo"],data:function(){return{gagueChart:null}},mounted:function(){this.gagueChart=o.a.init(this.$refs.gaugeChart),this.initGauge()},methods:{initGauge:function(){var t=0;switch(this.positionInfo.tag){case 1:t=20;break;case 2:t=60;break;case 3:t=90;break;default:t=0}var i={series:[{type:"gauge",min:0,max:100,detail:{formatter:"{value}%"},axisLine:{lineStyle:{color:[[.25,"#058837"],[.7,"#fd6501"],[1,"#ee2518"]],width:8}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:15,lineStyle:{width:3,color:"auto"}},data:[{value:t,name:""}]}]};this.gagueChart.setOption(i)}},watch:{positionInfo:function(){this.initGauge()}}},l=r,c=(a("8754"),a("9ca4")),g=Object(c["a"])(l,s,e,!1,null,"3c9fcf7c",null);i["a"]=g.exports},"676f":function(t,i,a){},"6d42":function(t,i,a){"use strict";var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"largeWarningItem"},[a("div",{staticClass:"warning-title"},[a("div",{staticClass:"title-left"},[a("i",{staticClass:"icon icon-warning"}),t._v(" "),a("span",{attrs:{title:t.info.threshold_keys+"超标"||!1}},[t._v(t._s(t.info.threshold_keys+"超标"||!1))])]),t._v(" "),a("div",{staticClass:"title-right"},[1===t.info.isnew?a("i",{staticClass:"icon icon-chat",on:{click:function(i){return i.stopPropagation(),t.handleEmit(i)}}}):t._e()])]),t._v(" "),a("div",{staticClass:"warning-content"},[a("p",[t._v(t._s(t.info.project&&t.info.project.name||"未知项目"))]),t._v(" "),a("p",[t._v(t._s(t.info.projects_positions&&t.info.projects_positions.area.area_name||"未知区域"))]),t._v(" "),a("p",[t._v(t._s(t.info.projects_positions&&t.info.projects_positions.name||"未知监测点"))]),t._v(" "),a("div",{staticClass:"footer-time"},[t._v("\n            "+t._s(t.info.waring_time||"未知时间")+"\n        ")])])])},e=[],n=a("dc12"),o={name:"largeWarningItem",props:["info"],components:{improveBox:n["a"]},data:function(){return{suggestVisible:!1}},methods:{handleEmit:function(){this.$emit("chatMsg",this.info)}}},r=o,l=(a("0495"),a("9ca4")),c=Object(l["a"])(r,s,e,!1,null,"30ca825c",null);i["a"]=c.exports},8754:function(t,i,a){"use strict";var s=a("29b7"),e=a.n(s);e.a},"9d8d":function(t,i,a){"use strict";var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"suggest-box"},[a("div",{staticClass:"content-box"},[a("ul",{staticClass:"msg-list"},t._l(t.warningMsgList,(function(i){return a("li",{key:i.msgId,staticClass:"msg-item"},[a("div",{staticClass:"user-info"},[a("div",{staticClass:"user-img"},[a("img",{attrs:{src:i.user.img&&i.user.img.path||"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1595009992994&di=f5efa6f786d5c7e328b04c92d0aa1883&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201410%2F09%2F20141009224754_AswrQ.jpeg",alt:""}})]),t._v(" "),a("p",{staticClass:"user-name"},[t._v(t._s(i.user.truename))])]),t._v(" "),a("div",{staticClass:"msg-info"},[a("p",{staticClass:"text-msg"},[t._v(t._s(i.content))]),t._v(" "),a("div",{staticClass:"img-msg"},t._l(i.pics_img,(function(i,s){return a("img",{key:s,attrs:{src:i.path,alt:""},on:{click:function(a){return t.handleDialog(i)}}})})),0)])])})),0)]),t._v(" "),a("div",{staticClass:"suggest-close"},[a("el-button",{staticClass:"close-btn",attrs:{size:"small",type:"primary"},on:{click:t.handleClose}},[t._v("关闭")])],1)])},e=[],n={name:"newImproveBox",props:["warningMsgList"],data:function(){return{bigImgUrl:"",dialogVisible:!1}},methods:{handleDialog:function(t){this.$emit("showBig",t.path)},handleClose:function(){this.$emit("close")}}},o=n,r=(a("e3f3"),a("9ca4")),l=Object(r["a"])(o,s,e,!1,null,"d280981e",null);i["a"]=l.exports},a58e:function(t,i,a){"use strict";var s=a("676f"),e=a.n(s);e.a},a99a:function(t,i,a){},dc12:function(t,i,a){"use strict";var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"suggest-box"},[a("div",{staticClass:"content-box"},[a("div",{staticClass:"suggest-content"},[a("div",{staticClass:"title"},[t._v("改善建议")]),t._v(" "),a("div",{staticClass:"content"},[t._v("\n                "+t._s(t.warningDetail.warning_msg)+"\n            ")])]),t._v(" "),a("div",{staticClass:"suggest-img"},[a("img",{attrs:{src:t.warningDetail.path,alt:""}})])]),t._v(" "),a("div",{staticClass:"suggest-close"},[a("el-button",{staticClass:"close-btn",attrs:{size:"small",type:"primary"},on:{click:t.handleClose}},[t._v("关闭")])],1)])},e=[],n={name:"improveBox",props:["warningDetail"],data:function(){return{}},methods:{handleClose:function(){this.$emit("close")}}},o=n,r=(a("13a7"),a("9ca4")),l=Object(r["a"])(o,s,e,!1,null,"4638c914",null);i["a"]=l.exports},e3f3:function(t,i,a){"use strict";var s=a("03a5"),e=a.n(s);e.a},fb87:function(t,i,a){}}]);