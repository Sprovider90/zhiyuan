(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-240d4446"],{"3fa5":function(e,t,a){},"55e7":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setThreshold mainPage"},[e.showParent?[a("div",{staticClass:"filterBox"},[a("el-button",{directives:[{name:"btnRole",rawName:"v-btnRole",value:5,expression:"5"}],attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新建监测标准")]),e._v(" "),a("el-input",{staticClass:"keywords fr",attrs:{size:"small",placeholder:"输入名称查询"},model:{value:e.searchInfo.name,callback:function(t){e.$set(e.searchInfo,"name",t)},expression:"searchInfo.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearch},slot:"append"})],1)],1),e._v(" "),a("div",{staticClass:"tableContent"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"编号",type:"index",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"标准名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"启用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#29cc85","inactive-color":"#888888"},on:{change:function(a){return e.handleChangeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})],1)]}}],null,!1,1043177070)}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"btnRole",rawName:"v-btnRole",value:6,expression:"6"}],attrs:{type:"text",size:"mini"},on:{click:function(a){return e.$router.push({name:"thresholdEdit",params:{id:t.row.id}})}}},[e._v("阈值设置")])]}}],null,!1,3525084203)})],1),e._v(" "),a("myPagination",{attrs:{pageInfo:e.pageInfo},on:{"current-change":e.pageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新建监测标准",visible:e.dialogVisible,"close-on-click-modal":!1,width:"30%"},on:{close:e.handleCloseDialog,"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"add-threshold"},[a("div",{staticClass:"threshold-name"},[a("span",{staticClass:"required"},[e._v("标准名称")]),e._v(" "),a("el-input",{staticStyle:{width:"280px"},attrs:{size:"small",type:"text"},model:{value:e.newThresholdName,callback:function(t){e.newThresholdName="string"===typeof t?t.trim():t},expression:"newThresholdName"}})],1),e._v(" "),a("div",{staticClass:"add-btn"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleDetermine}},[e._v("确定")])],1)])])]:e._e(),e._v(" "),a("router-view")],2)},s=[],i=(a("cc57"),a("de9f")),o=a("b775"),l={name:"setThreshold",data:function(){return{dialogVisible:!1,newThresholdName:"",showParent:!0,searchInfo:{name:""},tableData:[],pageInfo:{total:0,pageSize:20,currentPage:1}}},mounted:function(){"setThreshold"===this.$route.name?(this.showParent=!0,this.getThresholdsList()):this.showParent=!1},methods:{handleSearch:function(){this.pageInfo.currentPage=1,this.getThresholdsList()},getThresholdsList:function(){var e=this;Object(o["a"])(this.ajaxUrl.thresholdsList,{name:this.searchInfo.name,page:this.pageInfo.currentPage,pageSize:this.pageInfo.pageSize},"get").then((function(t){e.tableData=t.data,e.pageInfo.total=t.meta.total})).catch((function(e){console.log(e)}))},handleSet:function(){},handleDetermine:function(){var e=this;this.newThresholdName?Object(o["a"])(this.ajaxUrl.addThresholds,{name:this.newThresholdName}).then((function(t){e.$message.success("监测标准新增成功"),e.dialogVisible=!1,e.getThresholdsList()})).catch((function(e){console.log(e)})):this.$message.warning("请输入监测标准名称")},handleChangeStatus:function(e){var t=this;Object(o["a"])(this.ajaxUrl.editThresholds+e.id,{status:e.status},"patch").then((function(e){t.$message.success("状态修改成功"),t.getThresholdsList()})).catch((function(e){console.log(e)}))},pageChange:function(e){this.pageInfo.currentPage=e,this.getThresholdsList()},handleCloseDialog:function(){this.newThresholdName=""}},components:{myPagination:i["a"]}},r=l,c=(a("926d"),a("9ca4")),h=Object(c["a"])(r,n,s,!1,null,"2fd992a8",null);t["default"]=h.exports},"572a":function(e,t,a){},6736:function(e,t,a){"use strict";var n=a("572a"),s=a.n(n);s.a},"926d":function(e,t,a){"use strict";var n=a("3fa5"),s=a.n(n);s.a},de9f:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myPagination"},[a("div",{staticClass:"total"},[e._v("\n        共"+e._s(e.pageInfo.total)+"条数据，"+e._s(Math.ceil(e.pageInfo.total/e.pageInfo.pageSize))+"页\n    ")]),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageInfo.pageSize,"current-page":e.pageInfo.currentPage,total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1)},s=[],i={name:"myPagination",props:["pageInfo"],data:function(){return{}},created:function(){},methods:{handleCurrentChange:function(e){this.$emit("current-change",e)}}},o=i,l=(a("6736"),a("9ca4")),r=Object(l["a"])(o,n,s,!1,null,"dabd56de",null);t["a"]=r.exports}}]);