(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63de9596"],{"572a":function(e,l,t){},6736:function(e,l,t){"use strict";var a=t("572a"),i=t.n(a);i.a},"6ada":function(e,l,t){"use strict";t.r(l);var a=function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("div",{staticClass:"roleManagement mainPage"},[t("div",{staticClass:"btns"},[t("el-button",{directives:[{name:"btnRole",rawName:"v-btnRole",value:37,expression:"37"}],attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("新增角色")])],1),e._v(" "),t("div",{staticClass:"content"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{directives:[{name:"btnRole",rawName:"v-btnRole",value:38,expression:"38"}],attrs:{type:"text"},on:{click:function(t){return e.edit(l.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),t("el-dialog",{attrs:{title:e.curTitle,visible:e.dialogVisible,width:"50%","before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(l){e.dialogVisible=l}}},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"角色名称"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.form.name,callback:function(l){e.$set(e.form,"name","string"===typeof l?l.trim():l)},expression:"form.name"}}),e._v(" "),t("span",{staticClass:"item-hint"},[e._v("最多只能输入10个字")])],1),e._v(" "),t("el-form-item",{attrs:{label:"权限设置"}},[t("div",{staticClass:"settingBox"},[t("el-tree",{ref:"roleTree",attrs:{"node-key":"id",data:e.roleData,"show-checkbox":"","default-expand-all":!0,"default-checked-keys":e.checkRole,props:e.defaultProps}})],1)])],1),e._v(" "),t("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.handleCancle}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSaveRole}},[e._v("保 存")])],1)],1)],1)},i=[],n=(t("cc57"),t("de9f")),o=t("b775"),s={components:{myPagination:n["a"]},data:function(){return{formInline:{user:"",region:""},tableData:[],curTitle:"",dialogVisible:!1,form:{name:""},checkRole:[],editRole:null,roleData:[{id:1e4,label:"项目管理",children:[{id:11e3,label:"项目列表",children:[{id:1,label:"新增"},{id:2,label:"编辑"},{id:3,label:"监测点管理"},{id:4,label:"查看"}]},{id:12e3,label:"标准阈值设置",children:[{id:5,label:"新增"},{id:6,label:"阈值设置"}]},{id:13e3,label:"项目预警设置",children:[{id:7,label:"阈值设置"},{id:8,label:"预警条件"}]},{id:14e3,label:"预警警报",children:[{id:9,label:"发送消息"},{id:10,label:"查看"}]},{id:15e3,label:"解决方案",children:[{id:11,label:"回复"},{id:12,label:"查看"}]}]},{id:2e4,label:"预评估管理",children:[{id:13,label:"预评估设置"}]},{id:3e4,label:"客户管理",children:[{id:31e3,label:"客户列表",children:[{id:14,label:"新增"},{id:15,label:"编辑"},{id:16,label:"查看"}]},{id:32e3,label:"订单管理",children:[{id:17,label:"新增"},{id:18,label:"编辑"},{id:19,label:"查看"},{id:20,label:"取消"},{id:21,label:"发货"}]}]},{id:4e4,label:"库存管理",children:[{id:41e3,label:"仓库管理",children:[{id:22,label:"新增"},{id:23,label:"编辑"}]},{id:42e3,label:"设备管理",children:[{id:24,label:"新增"},{id:25,label:"批量导入/下载模板"},{id:26,label:"编辑"},{id:27,label:"收回"}]}]},{id:5e4,label:"财务管理",children:[{id:28,label:"查看"},{id:29,label:"收款"},{id:30,label:"退款"}]},{id:6e4,label:"数据报表",children:[{id:61e3,label:"数据查询",children:[{id:31,label:"查看"}]},{id:62e3,label:"数据分析",children:[{id:32,label:"数据对比"},{id:33,label:"查看"}]}]},{id:7e4,label:"系统管理",children:[{id:71e3,label:"用户管理",children:[{id:34,label:"新增"},{id:35,label:"编辑"},{id:36,label:"启用/停用"}]},{id:72e3,label:"角色管理",children:[{id:37,label:"新增"},{id:38,label:"编辑"}]},{id:73e3,label:"故障排查",children:[{id:39,label:"列表"}]},{id:74e3,label:"数据字典",children:[{id:40,label:"编辑"}]},{id:75e3,label:"登录日志",children:[{id:41,label:"列表"}]}]}],defaultProps:{},pageInfo:{total:50,pageSize:10,currentPage:1}}},created:function(){this.getRoleList()},methods:{getRoleList:function(){var e=this;Object(o["a"])(this.ajaxUrl.roleList,{},"get").then((function(l){e.tableData=l.data})).catch((function(e){console.log(e)}))},pageChange:function(e){console.log(e)},handleCreate:function(){this.curTitle="新增角色",this.form.name="",this.checkRole=[],this.dialogVisible=!0,this.editRole=null},resetChecked:function(){this.$refs["roleTree"].setCheckedKeys([])},handleSaveRole:function(){var e=this,l=this.$refs["roleTree"].getCheckedKeys(!0);""!==this.form.name?this.editRole?Object(o["a"])(this.ajaxUrl.editRole+this.editRole.id,{name:this.form.name,type:1,permissions:l.join(",")},"patch").then((function(l){e.$message.success("角色编辑成功"),e.dialogVisible=!1,e.getRoleList(),e.resetChecked()})).catch((function(e){console.log(e)})):Object(o["a"])(this.ajaxUrl.addRole,{name:this.form.name,type:1,permissions:l.join(",")}).then((function(l){e.dialogVisible=!1,e.$message.success("角色新增成功"),e.getRoleList(),e.resetChecked()})).catch((function(e){console.log(e)})):this.$message.warning("请输入角色名称")},edit:function(e){var l=this;this.curTitle="编辑角色",this.editRole=e,Object(o["a"])(this.ajaxUrl.rolePermissions+e.id+"/permissions",{},"get").then((function(t){l.dialogVisible=!0,l.checkRole=t.data.map((function(e){return e.id})),l.form.name=e.name})).catch((function(e){console.log(e)}))},handleCancle:function(){this.dialogVisible=!1,this.curTitle="",this.resetChecked()},handleClose:function(e){this.resetChecked(),e()}}},d=s,c=(t("c902"),t("9ca4")),r=Object(c["a"])(d,a,i,!1,null,"15291030",null);l["default"]=r.exports},"934e":function(e,l,t){},c902:function(e,l,t){"use strict";var a=t("934e"),i=t.n(a);i.a},de9f:function(e,l,t){"use strict";var a=function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("div",{staticClass:"myPagination"},[t("div",{staticClass:"total"},[e._v("\n        共"+e._s(e.pageInfo.total)+"条数据，"+e._s(Math.ceil(e.pageInfo.total/e.pageInfo.pageSize))+"页\n    ")]),e._v(" "),t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageInfo.pageSize,"current-page":e.pageInfo.currentPage,total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1)},i=[],n={name:"myPagination",props:["pageInfo"],data:function(){return{}},created:function(){},methods:{handleCurrentChange:function(e){this.$emit("current-change",e)}}},o=n,s=(t("6736"),t("9ca4")),d=Object(s["a"])(o,a,i,!1,null,"dabd56de",null);l["a"]=d.exports}}]);