(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78ccd486"],{"0350":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"projectList mainPage"},[t.showChild?[a("div",{staticClass:"project-header"},[a("div",{staticClass:"project-acount"},[a("div",{staticClass:"acount-left"},[a("h5",[t._v("项目数量")]),t._v(" "),a("p",[a("span",[t._v(t._s(t.countInfo.all_count))]),t._v("个")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.countInfo.all_count,expression:"countInfo.all_count!==0"}],staticClass:"progress"},[a("div",{staticClass:"not-start",style:{width:t.countInfo.not_started_count/t.countInfo.all_count*100+"%"}}),t._v(" "),a("div",{staticClass:"on-going",style:{width:t.countInfo.ongoing_count/t.countInfo.all_count*100+"%"}}),t._v(" "),a("div",{staticClass:"end",style:{width:t.countInfo.over_count/t.countInfo.all_count*100+"%"}})])]),t._v(" "),a("div",{staticClass:"acount-right"},[a("radio-group",{attrs:{size:"small"},on:{change:t.handleChange}}),t._v(" "),a("ul",{staticClass:"number"},[a("li",[a("span",[t._v("未开始")]),t._v(" "),a("span",[t._v(t._s(t.countInfo.not_started_count))])]),t._v(" "),a("li",[a("span",[t._v("进行中")]),t._v(" "),a("span",[t._v(t._s(t.countInfo.ongoing_count))])]),t._v(" "),a("li",[a("span",[t._v("已结束")]),t._v(" "),a("span",[t._v(t._s(t.countInfo.over_count))])])])],1)]),t._v(" "),a("div",{staticClass:"project-search"},[a("div",{staticClass:"filterBox"},[a("div",{staticClass:"filterItem"},[a("span",[t._v("项目状态")]),t._v(" "),a("el-select",{attrs:{size:"small",placeholder:"请选择项目状态"},model:{value:t.searchInfo.status,callback:function(e){t.$set(t.searchInfo,"status",e)},expression:"searchInfo.status"}},t._l(t.filterStatusList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("br")],1),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"filterItem"},[a("span"),t._v(" "),a("el-button",{staticClass:"minWidth",attrs:{type:"primary",size:"small"},on:{click:t.handleSearch}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.searchInfo.status=""}}},[t._v("重置查询条件")])],1)])])]),t._v(" "),a("div",{staticClass:"tableContent content"},[a("div",{staticClass:"filterBox",staticStyle:{"margin-bottom":"0"}},[a("div",{staticClass:"filterItem"},[a("el-button",{directives:[{name:"btnRole",rawName:"v-btnRole",value:1,expression:"1"}],staticClass:"minWidth",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$router.push({name:"addProject"})}}},[t._v("新增项目")])],1),t._v(" "),a("div",{staticClass:"filterItem fr"},[a("el-input",{staticClass:"keywords fr",attrs:{size:"small",placeholder:"输入项目名称查询"},model:{value:t.searchInfo.name,callback:function(e){t.$set(t.searchInfo,"name",e)},expression:"searchInfo.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleSearch},slot:"append"})],1)],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableContent,border:""}},[a("el-table-column",{attrs:{"header-align":"left",prop:"number",label:"项目编号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left","min-width":"200",label:"项目信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("名称："+t._s(e.row.name))]),t._v(" "),a("div",[t._v("地址："+t._s(e.row.address))])]}}],null,!1,2776821868)}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",label:"所属客户",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.customs&&e.row.customs[0]&&e.row.customs[0].company_name))])]}}],null,!1,3664261408)}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"position_count",label:"监测点数量",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"device_count",label:"设备数量",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",prop:"created_at",label:"创建时间",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",align:"left",prop:"status",label:"项目状态",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-status"},[a("span",{class:"color"+e.row.status},[t._v(t._s(t.publicObj.projectStatus[e.row.status]))])])]}}],null,!1,1155847404)}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[2!=e.row.status?a("el-button",{directives:[{name:"btnRole",rawName:"v-btnRole",value:2,expression:"2"}],attrs:{type:"text"},on:{click:function(a){return t.$router.push({name:"editProject",params:{id:e.row.id}})}}},[t._v("编辑")]):t._e(),t._v(" "),a("el-button",{directives:[{name:"btnRole",rawName:"v-btnRole",value:4,expression:"4"}],attrs:{type:"text"},on:{click:function(a){return t.$router.push({name:"checkProject",params:{id:e.row.id}})}}},[t._v("查看")]),t._v(" "),2!=e.row.status?a("el-button",{directives:[{name:"btnRole",rawName:"v-btnRole",value:3,expression:"3"}],attrs:{type:"text"},on:{click:function(a){return t.$router.push({name:"monitorManager",params:{id:e.row.id}})}}},[t._v("监测点管理")]):t._e()]}}],null,!1,3204963420)})],1),t._v(" "),a("myPagination",{attrs:{pageInfo:t.pageInfo},on:{"current-change":t.pageChange}})],1)]:t._e(),t._v(" "),a("router-view")],2)},s=[],o=(a("cc57"),a("c85d")),l=a("de9f"),i=a("b775"),c={name:"projectList",data:function(){return{showChild:!1,acount:100,filterStatusList:[{label:"未开始",value:0},{label:"暂停中",value:1},{label:"已结束",value:2},{label:"项目错误",value:3},{label:"施工中",value:4},{label:"交付中",value:5},{label:"维护中",value:6},{label:"项目大阶段错误",value:7}],tableContent:[],searchInfo:{status:"",name:""},pageInfo:{total:0,pageSize:20,currentPage:1},timeType:1,countInfo:{}}},mounted:function(){"projectList"===this.$route.name?(this.showChild=!0,this.getProjectCount(),this.getProjectList()):this.showChild=!1},methods:{handleSearch:function(){this.pageInfo.currentPage=1,this.getProjectList()},handleChange:function(t){this.timeType=t},getProjectCount:function(){var t=this;Object(i["a"])(this.ajaxUrl.projectsCount,{type:this.timeType},"get").then((function(e){t.countInfo=e})).catch((function(t){console.log(t)}))},getProjectList:function(){var t=this;Object(i["a"])(this.ajaxUrl.projectsList,{include:"customs",pageSize:this.pageInfo.pageSize,page:this.pageInfo.currentPage,status:this.searchInfo.status,name:this.searchInfo.name},"get").then((function(e){t.pageInfo.total=e.meta.total,t.tableContent=e.data})).catch((function(t){console.log(t)}))},pageChange:function(t){this.pageInfo.currentPage=t,this.getProjectList()}},watch:{timeType:function(){this.getProjectCount()}},components:{radioGroup:o["a"],myPagination:l["a"]}},r=c,u=(a("ed67"),a("9ca4")),v=Object(u["a"])(r,n,s,!1,null,"705253aa",null);e["default"]=v.exports},"572a":function(t,e,a){},6736:function(t,e,a){"use strict";var n=a("572a"),s=a.n(n);s.a},a87a:function(t,e,a){},c499:function(t,e,a){},c6876:function(t,e,a){"use strict";var n=a("c499"),s=a.n(n);s.a},c85d:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"radioGroup",class:this.size},[a("li",{class:{on:1===t.active},on:{click:function(e){return t.handleClick(1)}}},[t._v("本周")]),t._v(" "),a("li",{class:{on:2===t.active},on:{click:function(e){return t.handleClick(2)}}},[t._v("本月")]),t._v(" "),a("li",{class:{on:3===t.active},on:{click:function(e){return t.handleClick(3)}}},[t._v("本年")])])},s=[],o={name:"radioGroup",props:["size"],data:function(){return{active:1}},mounted:function(){},methods:{handleClick:function(t){this.active=t,this.$emit("change",this.active)},reset:function(){this.active=""}}},l=o,i=(a("c6876"),a("9ca4")),c=Object(i["a"])(l,n,s,!1,null,null,null);e["a"]=c.exports},de9f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myPagination"},[a("div",{staticClass:"total"},[t._v("\n        共"+t._s(t.pageInfo.total)+"条数据，"+t._s(Math.ceil(t.pageInfo.total/t.pageInfo.pageSize))+"页\n    ")]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageInfo.pageSize,"current-page":t.pageInfo.currentPage,total:t.pageInfo.total},on:{"current-change":t.handleCurrentChange}})],1)},s=[],o={name:"myPagination",props:["pageInfo"],data:function(){return{}},created:function(){},methods:{handleCurrentChange:function(t){this.$emit("current-change",t)}}},l=o,i=(a("6736"),a("9ca4")),c=Object(i["a"])(l,n,s,!1,null,"dabd56de",null);e["a"]=c.exports},ed67:function(t,e,a){"use strict";var n=a("a87a"),s=a.n(n);s.a}}]);