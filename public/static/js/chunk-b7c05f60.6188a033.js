(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b7c05f60"],{"572a":function(e,t,a){},6736:function(e,t,a){"use strict";var n=a("572a"),s=a.n(n);s.a},8283:function(e,t,a){},a510:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"communication mainPage"},[e.showParent?[a("div",{staticClass:"tableContent"},[a("div",{staticClass:"filterBox"},[a("div",{staticClass:"filterItem"},[a("span",[e._v("预警时间：")]),e._v(" "),a("el-date-picker",{staticClass:"day-timePicker",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",size:"small",clearable:"",type:"datetimerange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间"},on:{change:e.handleSearch},model:{value:e.searchInfo.time,callback:function(t){e.$set(e.searchInfo,"time",t)},expression:"searchInfo.time"}})],1),e._v(" "),a("div",{staticClass:"filterItem"},[a("span",[e._v("预警指标：")]),e._v(" "),a("el-select",{attrs:{clearable:"",size:"small",placeholder:"请选择指标"},on:{change:e.handleSearch},model:{value:e.searchInfo.threshold_keys,callback:function(t){e.$set(e.searchInfo,"threshold_keys",t)},expression:"searchInfo.threshold_keys"}},[a("el-option",{attrs:{label:"甲醛",value:"formaldehyde"}}),e._v(" "),a("el-option",{attrs:{label:"CO2",value:"CO2"}}),e._v(" "),a("el-option",{attrs:{label:"温度",value:"temperature"}}),e._v(" "),a("el-option",{attrs:{label:"湿度",value:"humidity"}}),e._v(" "),a("el-option",{attrs:{label:"TVOC",value:"TVOC"}}),e._v(" "),a("el-option",{attrs:{label:"PM2.5",value:"PM25"}})],1)],1),e._v(" "),a("div",{staticClass:"filterBox fr"},[a("el-input",{staticClass:"keywords fr",attrs:{clearable:"",size:"small",placeholder:"输入项目/监测点名称查询"},model:{value:e.searchInfo.reuseparam,callback:function(t){e.$set(e.searchInfo,"reuseparam",t)},expression:"searchInfo.reuseparam"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearch},slot:"append"})],1)],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"编号",type:"index",index:e.indexMethod,width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"监测点"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"point-el"},[a("span",[e._v(e._s(t.row.projects_positions&&t.row.projects_positions.name))]),e._v(" "),1===t.row.isnew?a("span",{staticClass:"is-new"},[e._v("NEW")]):e._e()])]}}],null,!1,3605361170)}),e._v(" "),a("el-table-column",{attrs:{label:"所在区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"point-el"},[a("span",[e._v(e._s(t.row.projects_positions&&t.row.projects_positions.area.area_name))])])]}}],null,!1,2361280028)}),e._v(" "),a("el-table-column",{attrs:{prop:"project",label:"所属项目"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.project&&t.row.project.name))])]}}],null,!1,36596920)}),e._v(" "),a("el-table-column",{attrs:{prop:"customer",label:"所属客户"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.project&&t.row.project.customs[0]&&t.row.project.customs[0].company_name))])]}}],null,!1,516171541)}),e._v(" "),a("el-table-column",{attrs:{prop:"waring_time",label:"预警时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"threshold_keys",label:"预警指标"}}),e._v(" "),a("el-table-column",{attrs:{prop:"smscount",label:"信息数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isCustomer?[a("el-button",{directives:[{name:"btnRole",rawName:"v-btnRole",value:10,expression:"10"}],attrs:{type:"text",size:"mini"},on:{click:function(a){e.$router.push({name:e.isCustomer?"customerMsg":"solutionMsg",params:{id:t.row.id},query:{type:"check"}})}}},[e._v("查看")]),e._v(" "),a("el-button",{directives:[{name:"btnRole",rawName:"v-btnRole",value:9,expression:"9"}],attrs:{type:"text",size:"mini"},on:{click:function(a){e.$router.push({name:e.isCustomer?"customerMsg":"solutionMsg",params:{id:t.row.id},query:{type:"send"}})}}},[e._v("发送消息")])]:e._e(),e._v(" "),e.isCustomer?e._e():[a("el-button",{directives:[{name:"btnRole",rawName:"v-btnRole",value:12,expression:"12"}],attrs:{type:"text",size:"mini"},on:{click:function(a){e.$router.push({name:e.isCustomer?"customerMsg":"solutionMsg",params:{id:t.row.id},query:{type:"check"}})}}},[e._v("查看")]),e._v(" "),a("el-button",{directives:[{name:"btnRole",rawName:"v-btnRole",value:11,expression:"11"}],attrs:{type:"text",size:"mini"},on:{click:function(a){e.$router.push({name:e.isCustomer?"customerMsg":"solutionMsg",params:{id:t.row.id},query:{type:"send"}})}}},[e._v("回复")])]]}}],null,!1,4160749141)})],1),e._v(" "),a("myPagination",{attrs:{pageInfo:e.pageInfo},on:{"current-change":e.pageChange}})],1)]:e._e(),e._v(" "),a("router-view")],2)},s=[],o=(a("cc57"),a("de9f")),r=a("b775"),i={name:"communication",data:function(){return{showParent:!0,isCustomer:!0,searchInfo:{threshold_keys:"",time:[],reuseparam:""},tableData:[],pageInfo:{total:0,pageSize:20,currentPage:1}}},mounted:function(){"customerWarning"===this.$route.name||"solution"===this.$route.name?(this.showParent=!0,"customerWarning"===this.$route.name?this.isCustomer=!0:this.isCustomer=!1,this.getEarlywarningList()):this.showParent=!1},methods:{handleSearch:function(){this.pageInfo.currentPage=1,this.getEarlywarningList()},indexMethod:function(e){return(this.pageInfo.currentPage-1)*this.pageInfo.pageSize+e+1},getEarlywarningList:function(){var e=this,t=this.searchInfo.time&&this.searchInfo.time[0],a=this.searchInfo.time&&this.searchInfo.time[1];Object(r["a"])(this.ajaxUrl.earlyWarningList,{threshold_keys:this.searchInfo.threshold_keys,reuseparam:this.searchInfo.reuseparam,start_time:t,end_time:a,page:this.pageInfo.currentPage,pageSize:this.pageInfo.pageSize},"get").then((function(t){e.tableData=t.data,e.pageInfo.total=t.meta.total})).catch((function(e){console.log(e)}))},pageChange:function(e){this.pageInfo.currentPage=e,this.getEarlywarningList()}},components:{myPagination:o["a"]}},l=i,c=(a("bc56"),a("9ca4")),u=Object(c["a"])(l,n,s,!1,null,"ea86edc6",null);t["default"]=u.exports},bc56:function(e,t,a){"use strict";var n=a("8283"),s=a.n(n);s.a},de9f:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"myPagination"},[a("div",{staticClass:"total"},[e._v("\n        共"+e._s(e.pageInfo.total)+"条数据，"+e._s(Math.ceil(e.pageInfo.total/e.pageInfo.pageSize))+"页\n    ")]),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageInfo.pageSize,"current-page":e.pageInfo.currentPage,total:e.pageInfo.total},on:{"current-change":e.handleCurrentChange}})],1)},s=[],o={name:"myPagination",props:["pageInfo"],data:function(){return{}},created:function(){},methods:{handleCurrentChange:function(e){this.$emit("current-change",e)}}},r=o,i=(a("6736"),a("9ca4")),l=Object(i["a"])(r,n,s,!1,null,"dabd56de",null);t["a"]=l.exports}}]);