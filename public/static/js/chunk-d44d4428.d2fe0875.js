(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d44d4428"],{3164:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dictionary mainPage"},[a("div",{staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"配置项目"}}),t._v(" "),a("el-table-column",{attrs:{prop:"value",label:"项目值"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.value.map((function(t){return t.name})).join("，"))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"left",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("myPagination",{attrs:{pageInfo:t.pageInfo},on:{"current-change":t.pageChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑配置",visible:t.dialogShow,"before-close":t.handleClose,"close-on-click-modal":!1,width:"400px"},on:{"update:visible":function(e){t.dialogShow=e}}},[a("div",{staticClass:"dictionaryEdit"},[a("div",{staticClass:"allocation"},[a("span",[t._v("配置项目：")]),a("span",[t._v(t._s(t.editDictionary.name))]),t._v(" "),t.editDictionary.value.length<=t.defaultLength?a("el-button",{staticClass:"add-btn",attrs:{type:"text",size:"small"},on:{click:t.handleAddItem}},[t._v("新增项目值")]):t._e()],1),t._v(" "),a("ul",{staticClass:"dictionaryList"},t._l(t.editDictionary.value,(function(e,n){return a("li",{key:e.id},[a("el-input",{staticStyle:{width:"85%"},attrs:{size:"small",type:"text"},model:{value:e.name,callback:function(a){t.$set(e,"name","string"===typeof a?a.trim():a)},expression:"item.name"}}),t._v(" "),n>=t.defaultLength?a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleDelItem(n)}}},[t._v("删除")]):t._e()],1)})),0),t._v(" "),a("el-button",{staticClass:"save-btn",attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("保存")])],1)])],1)},i=[],o=(a("ed63"),a("8cf2"),a("de9f")),l=a("b775"),c={components:{myPagination:o["a"]},data:function(){return{dialogShow:!1,allocation:1,defaultLength:0,tableData:[],editDictionary:{name:"",value:[]},editId:0,pageInfo:{total:0,pageSize:10,currentPage:1}}},created:function(){this.getDictionaryList()},methods:{getDictionaryList:function(){var t=this;Object(l["a"])(this.ajaxUrl.dictionaryList,{page:this.pageInfo.currentPage,pageSize:this.pageInfo.pageSize},"get").then((function(e){t.tableData=e.data,t.pageInfo.total=e.meta.total})).catch((function(t){console.log(t)}))},handleEdit:function(t){t=JSON.parse(JSON.stringify(t)),this.defaultLength=t.value.length,this.editDictionary=t,this.dialogShow=!0},handleAddItem:function(){this.editDictionary.value.push({id:this.defaultLength+1,name:""})},handleDelItem:function(t){this.editDictionary.value.splice(t,1)},handleSave:function(){var t=this,e=JSON.stringify(this.editDictionary).includes('""');e?this.$message.warning("项目值不能为空"):Object(l["a"])(this.ajaxUrl.editDictionary+this.editDictionary.id,{value:JSON.stringify(this.editDictionary.value)},"patch").then((function(e){t.$message.success("保存成功"),t.editDictionary={name:"",value:[]},t.dialogShow=!1,t.getDictionaryList()})).catch((function(t){console.log(t)}))},handleClose:function(t){this.editDictionary={name:"",value:[]},t()},pageChange:function(t){this.pageInfo.currentPage=t,this.getDictionaryList()}}},s=c,r=(a("e895"),a("9ca4")),u=Object(r["a"])(s,n,i,!1,null,"30955d12",null);e["default"]=u.exports},"572a":function(t,e,a){},6736:function(t,e,a){"use strict";var n=a("572a"),i=a.n(n);i.a},de9f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myPagination"},[a("div",{staticClass:"total"},[t._v("\n        共"+t._s(t.pageInfo.total)+"条数据，"+t._s(Math.ceil(t.pageInfo.total/t.pageInfo.pageSize))+"页\n    ")]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageInfo.pageSize,"current-page":t.pageInfo.currentPage,total:t.pageInfo.total},on:{"current-change":t.handleCurrentChange}})],1)},i=[],o={name:"myPagination",props:["pageInfo"],data:function(){return{}},created:function(){},methods:{handleCurrentChange:function(t){this.$emit("current-change",t)}}},l=o,c=(a("6736"),a("9ca4")),s=Object(c["a"])(l,n,i,!1,null,"dabd56de",null);e["a"]=s.exports},e336:function(t,e,a){},e895:function(t,e,a){"use strict";var n=a("e336"),i=a.n(n);i.a}}]);