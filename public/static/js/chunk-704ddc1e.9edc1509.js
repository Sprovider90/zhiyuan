(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-704ddc1e"],{"0acf":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"pieChart",staticClass:"pie-chart"})},s=[],n=a("7f22"),r=a.n(n),c={name:"largePieChart",props:["detail"],data:function(){return{pieChart:null}},mounted:function(){this.pieChart=r.a.init(this.$refs.pieChart)},updated:function(){},methods:{initRing:function(){var e=0,t="";3===this.detail.tag?(t="#fb4542",e=90):2===this.detail.tag?(t="#ff9d00",e=60):1===this.detail.tag?(t="#40c133",e=20):(t="#40c133",e=0),this.pieChart.setOption({series:[{name:"",type:"pie",radius:["85%","100%"],hoverAnimation:!1,cursor:"auto",label:{show:!1,position:"center"},data:[{value:e,itemStyle:{color:t}},{value:100-e,itemStyle:{color:"#393a56"}}]}]})}},watch:{detail:function(e){this.initRing()}}},o=c,l=(a("a58e"),a("9ca4")),d=Object(l["a"])(o,i,s,!1,null,"12eef0ab",null);t["a"]=d.exports},"17bc":function(e,t,a){},"29b7":function(e,t,a){},"3e4a":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gaugeChart"},[a("div",{staticClass:"gaugeBox"},[a("div",{ref:"gaugeChart",style:{width:"100%",height:"100%"}})]),e._v(" "),a("div",{staticClass:"address"},[a("p",{staticClass:"name",attrs:{title:e.positionInfo.position_name}},[e._v(e._s(e.positionInfo.position_name))]),e._v(" "),a("p",{staticClass:"address-info"},[e._v(e._s(e.positionInfo.project_name)+" | "+e._s(e.positionInfo.area_name))])])])},s=[],n=a("7f22"),r=a.n(n),c={name:"gaugeChart",props:["positionInfo"],data:function(){return{gagueChart:null}},mounted:function(){this.gagueChart=r.a.init(this.$refs.gaugeChart),this.initGauge()},methods:{initGauge:function(){var e=0;switch(this.positionInfo.tag){case 1:e=20;break;case 2:e=60;break;case 3:e=90;break;default:e=0}var t={series:[{type:"gauge",min:0,max:100,detail:{formatter:"{value}%"},axisLine:{lineStyle:{color:[[.25,"#058837"],[.7,"#fd6501"],[1,"#ee2518"]],width:8}},axisTick:{length:15,lineStyle:{color:"auto"}},splitLine:{length:15,lineStyle:{width:3,color:"auto"}},data:[{value:e,name:""}]}]};this.gagueChart.setOption(t)}},watch:{positionInfo:function(){this.initGauge()}}},o=c,l=(a("8754"),a("9ca4")),d=Object(l["a"])(o,i,s,!1,null,"3c9fcf7c",null);t["a"]=d.exports},"5b5c":function(e,t,a){var i={"./af":"0154","./af.js":"0154","./ar":"a16b","./ar-dz":"a1aa","./ar-dz.js":"a1aa","./ar-kw":"c6c3","./ar-kw.js":"c6c3","./ar-ly":"85f7","./ar-ly.js":"85f7","./ar-ma":"f589","./ar-ma.js":"f589","./ar-sa":"0ef8","./ar-sa.js":"0ef8","./ar-tn":"c3a3","./ar-tn.js":"c3a3","./ar.js":"a16b","./az":"1bfa","./az.js":"1bfa","./be":"f5be","./be.js":"f5be","./bg":"f934","./bg.js":"f934","./bm":"56bb","./bm.js":"56bb","./bn":"70cf","./bn.js":"70cf","./bo":"0074","./bo.js":"0074","./br":"22a4","./br.js":"22a4","./bs":"9ad2","./bs.js":"9ad2","./ca":"6c31","./ca.js":"6c31","./cs":"abba","./cs.js":"abba","./cv":"7b52","./cv.js":"7b52","./cy":"5f2f","./cy.js":"5f2f","./da":"0f6d","./da.js":"0f6d","./de":"dac6","./de-at":"23f3","./de-at.js":"23f3","./de-ch":"bb77","./de-ch.js":"bb77","./de.js":"dac6","./dv":"fdb0","./dv.js":"fdb0","./el":"343c","./el.js":"343c","./en-au":"54e8","./en-au.js":"54e8","./en-ca":"bee6","./en-ca.js":"bee6","./en-gb":"b53c","./en-gb.js":"b53c","./en-ie":"691d","./en-ie.js":"691d","./en-il":"24f7","./en-il.js":"24f7","./en-in":"8393","./en-in.js":"8393","./en-nz":"64cd","./en-nz.js":"64cd","./en-sg":"8a05","./en-sg.js":"8a05","./eo":"046d","./eo.js":"046d","./es":"7694","./es-do":"b81d","./es-do.js":"b81d","./es-us":"8b63","./es-us.js":"8b63","./es.js":"7694","./et":"1856","./et.js":"1856","./eu":"0ccc","./eu.js":"0ccc","./fa":"7d80","./fa.js":"7d80","./fi":"cc1c","./fi.js":"cc1c","./fil":"8107","./fil.js":"8107","./fo":"5927","./fo.js":"5927","./fr":"0071","./fr-ca":"dfd2","./fr-ca.js":"dfd2","./fr-ch":"34f3","./fr-ch.js":"34f3","./fr.js":"0071","./fy":"94ed","./fy.js":"94ed","./ga":"f82e","./ga.js":"f82e","./gd":"c61e","./gd.js":"c61e","./gl":"9124","./gl.js":"9124","./gom-deva":"ec6e","./gom-deva.js":"ec6e","./gom-latn":"c225","./gom-latn.js":"c225","./gu":"8a84","./gu.js":"8a84","./he":"f94d","./he.js":"f94d","./hi":"44ab","./hi.js":"44ab","./hr":"ec4c","./hr.js":"ec4c","./hu":"021a","./hu.js":"021a","./hy-am":"61f8","./hy-am.js":"61f8","./id":"f91e","./id.js":"f91e","./is":"dd50","./is.js":"dd50","./it":"a409","./it-ch":"333c","./it-ch.js":"333c","./it.js":"a409","./ja":"0918","./ja.js":"0918","./jv":"91ca","./jv.js":"91ca","./ka":"01c5","./ka.js":"01c5","./kk":"222d","./kk.js":"222d","./km":"967d","./km.js":"967d","./kn":"f31e","./kn.js":"f31e","./ko":"84dd","./ko.js":"84dd","./ku":"3bb0","./ku.js":"3bb0","./ky":"6b69","./ky.js":"6b69","./lb":"ae2f","./lb.js":"ae2f","./lo":"9ad28","./lo.js":"9ad28","./lt":"7ae9","./lt.js":"7ae9","./lv":"ee48","./lv.js":"ee48","./me":"72bc","./me.js":"72bc","./mi":"e072","./mi.js":"e072","./mk":"1c3c","./mk.js":"1c3c","./ml":"bd5a","./ml.js":"bd5a","./mn":"9459","./mn.js":"9459","./mr":"9559","./mr.js":"9559","./ms":"3ccb","./ms-my":"7670","./ms-my.js":"7670","./ms.js":"3ccb","./mt":"f2a4","./mt.js":"f2a4","./my":"0f9b","./my.js":"0f9b","./nb":"d231","./nb.js":"d231","./ne":"8388","./ne.js":"8388","./nl":"1f79","./nl-be":"51eb","./nl-be.js":"51eb","./nl.js":"1f79","./nn":"4ebd","./nn.js":"4ebd","./oc-lnc":"8adc","./oc-lnc.js":"8adc","./pa-in":"7b6a","./pa-in.js":"7b6a","./pl":"55f6","./pl.js":"55f6","./pt":"b479","./pt-br":"1105","./pt-br.js":"1105","./pt.js":"b479","./ro":"cdf1","./ro.js":"cdf1","./ru":"f5c8","./ru.js":"f5c8","./sd":"ad40","./sd.js":"ad40","./se":"5f63","./se.js":"5f63","./si":"68d8","./si.js":"68d8","./sk":"4af9","./sk.js":"4af9","./sl":"ffbe","./sl.js":"ffbe","./sq":"f55a","./sq.js":"f55a","./sr":"cf4a","./sr-cyrl":"926e","./sr-cyrl.js":"926e","./sr.js":"cf4a","./ss":"afa0","./ss.js":"afa0","./sv":"32ec","./sv.js":"32ec","./sw":"f832","./sw.js":"f832","./ta":"50b9","./ta.js":"50b9","./te":"558e","./te.js":"558e","./tet":"e75b","./tet.js":"e75b","./tg":"b98b","./tg.js":"b98b","./th":"37b4","./th.js":"37b4","./tk":"7907","./tk.js":"7907","./tl-ph":"55bd","./tl-ph.js":"55bd","./tlh":"692f","./tlh.js":"692f","./tr":"0ced","./tr.js":"0ced","./tzl":"afa0f","./tzl.js":"afa0f","./tzm":"b817","./tzm-latn":"53be","./tzm-latn.js":"53be","./tzm.js":"b817","./ug-cn":"d62a","./ug-cn.js":"d62a","./uk":"2ac1","./uk.js":"2ac1","./ur":"3aea","./ur.js":"3aea","./uz":"4b7a","./uz-latn":"936f","./uz-latn.js":"936f","./uz.js":"4b7a","./vi":"8c25","./vi.js":"8c25","./x-pseudo":"e1ad","./x-pseudo.js":"e1ad","./yo":"0a91","./yo.js":"0a91","./zh-cn":"d2a5","./zh-cn.js":"d2a5","./zh-hk":"db73","./zh-hk.js":"db73","./zh-mo":"28fe","./zh-mo.js":"28fe","./zh-tw":"32e9","./zh-tw.js":"32e9"};function s(e){var t=n(e);return a(t)}function n(e){var t=i[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id="5b5c"},"676f":function(e,t,a){},"843e":function(e,t,a){"use strict";var i=a("17bc"),s=a.n(i);s.a},8754:function(e,t,a){"use strict";var i=a("29b7"),s=a.n(i);s.a},"9e91":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"largeFilterBox",class:e.size},[a("ul",{staticClass:"type-filter"},[a("li",{class:"formaldehyde"===e.activeType?"on":"",on:{click:function(t){return e.handleChangeType("formaldehyde")}}},[e._v("甲醛")]),e._v(" "),a("li",{class:"TVOC"===e.activeType?"on":"",on:{click:function(t){return e.handleChangeType("TVOC")}}},[e._v("TVOC")]),e._v(" "),e.others?[a("li",{class:"PM25"===e.activeType?"on":"",on:{click:function(t){return e.handleChangeType("PM25")}}},[e._v("PM2.5")]),e._v(" "),a("li",{class:"CO2"===e.activeType?"on":"",on:{click:function(t){return e.handleChangeType("CO2")}}},[e._v("CO2")]),e._v(" "),a("li",{class:"temperature"===e.activeType?"on":"",on:{click:function(t){return e.handleChangeType("temperature")}}},[e._v("温度")]),e._v(" "),a("li",{class:"humidity"===e.activeType?"on":"",on:{click:function(t){return e.handleChangeType("humidity")}}},[e._v("湿度")])]:e._e()],2),e._v(" "),a("ul",{staticClass:"time-filter"},[a("li",{class:"today"===e.activeTime?"on":"",on:{click:function(t){return e.handleChangeTime("today")}}},[e._v("今天")]),e._v(" "),a("li",{class:"thirdDay"===e.activeTime?"on":"",on:{click:function(t){return e.handleChangeTime("thirdDay")}}},[e._v("最近三天")]),e._v(" "),a("li",{class:"sevenDay"===e.activeTime?"on":"",on:{click:function(t){return e.handleChangeTime("sevenDay")}}},[e._v("最近7天")]),e._v(" "),a("li",{class:"thirdtyDay"===e.activeTime?"on":"",on:{click:function(t){return e.handleChangeTime("thirdtyDay")}}},[e._v("最近30天")]),e._v(" "),a("li",{class:"userDefined"===e.activeTime?"on":"",on:{click:function(t){return e.handleChangeTime("userDefined")}}},[e._v("\n            自定义\n            "),a("el-date-picker",{staticClass:"userDefined",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm","picker-options":e.pickerOptionsDay,size:"small",type:"datetimerange","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.handleDefined},model:{value:e.definedTime,callback:function(t){e.definedTime=t},expression:"definedTime"}})],1)])])},s=[],n=a("35f4e"),r=a.n(n),c={name:"largeFilterBox",props:["size","others"],data:function(){return{activeType:"formaldehyde",activeTime:"today",timeRange:{startTime:r()().startOf("day").format("YYYY-MM-DD HH:mm:ss"),endTime:r()().format("YYYY-MM-DD HH:mm:ss")},definedTime:[],pickerOptionsDay:{disabledDate:function(e){return e.getTime()>r()()||e.getTime()<r()().subtract(1,"year")}},timeObj:{today:r()().startOf("day").format("YYYY-MM-DD HH:mm:ss"),thirdDay:r()().subtract(2,"day").startOf("day").format("YYYY-MM-DD HH:mm:ss"),sevenDay:r()().subtract(6,"day").startOf("day").format("YYYY-MM-DD HH:mm:ss"),thirdtyDay:r()().subtract(29,"day").startOf("day").format("YYYY-MM-DD HH:mm:ss"),userDefined:""}}},methods:{handleChangeType:function(e){this.activeType=e,this.$emit("filterChange",this.activeType,this.timeRange)},handleChangeTime:function(e){"userDefined"!=e&&(this.activeTime=e,this.timeRange.startTime=this.timeObj[e],this.timeRange.endTime=r()().format("YYYY-MM-DD HH:mm:ss"),this.$emit("filterChange",this.activeType,this.timeRange))},handleDefined:function(e){this.timeRange.startTime=e[0],this.timeRange.endTime=e[1],this.activeTime="userDefined",this.$emit("filterChange",this.activeType,this.timeRange)}}},o=c,l=(a("843e"),a("9ca4")),d=Object(l["a"])(o,i,s,!1,null,"6a59cd24",null);t["a"]=d.exports},a58e:function(e,t,a){"use strict";var i=a("676f"),s=a.n(i);s.a},b0d0:function(e,t,a){"use strict";var i=a("b400"),s=a.n(i);s.a},b400:function(e,t,a){},d341:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"areaDetail"},[a("div",{staticClass:"areaDetail-top"},[a("div",{staticClass:"top-left-gauge",on:{click:function(t){return e.$router.push({name:"dataComparison",params:{id:e.projectId}})}}},[a("gaugeChart",{attrs:{positionInfo:e.positionInfo}})],1),e._v(" "),a("div",{staticClass:"top-right-line"},[a("largeFilterBox",{attrs:{size:"small",others:!0},on:{filterChange:e.handleFilterChange}}),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.chartDataLoading,expression:"chartDataLoading"}],staticClass:"areaDetail-linChart",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("div",{ref:"lineChart",staticClass:"lineChart"})])],1)]),e._v(" "),a("div",{staticClass:"areaDetail-bottom"},[e._m(0),e._v(" "),a("ul",{staticClass:"type-list"},e._l(e.typeList,(function(t,i){return t.tag?a("li",{key:i,staticClass:"type-item"},[a("div",{staticClass:"item-info"},[a("p",[e._v(e._s(t.value))]),e._v(" "),a("p",[e._v(e._s(t.name))])]),e._v(" "),a("div",{staticClass:"item-chart"},[a("largePieChart",{ref:"largePieChart",refInFor:!0,attrs:{detail:t}}),e._v(" "),a("p",{staticClass:"type-status"},[1===t.tag?a("span",[e._v("优质")]):2===t.tag?a("span",[e._v("合格")]):3===t.tag?a("span",[e._v("污染")]):a("span",[e._v("未知")])])],1)]):e._e()})),0)])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"hint"},[a("span",[e._v("LEED")]),a("i",{staticClass:"icon icon-hint"})])}],n=(a("5ab2"),a("6d57"),a("e10e"),a("b449"),a("6648")),r=a("200d"),c=(a("cc57"),a("7f22")),o=a.n(c),l=a("35f4e"),d=a.n(l),f=a("3e4a"),h=a("0acf"),u=a("9e91"),m=a("b775"),p=a("3de1");function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={name:"areaDetail",data:function(){return{activeType:"formaldehyde",lineChart:null,projectId:"",positionId:"",chartDataLoading:!1,typeList:[{name:"甲醛",type:"formaldehyde",value:0,tag:1},{name:"温度",type:"temperature",value:0,tag:1},{name:"湿度",type:"humidity",value:0,tag:1},{name:"TVOC",type:"TVOC",value:0,tag:1},{name:"PM2.5",type:"PM25",value:0,tag:1},{name:"CO2",type:"CO2",value:0,tag:1}],markLine:{formaldehyde:0,TVOC:0},searchTime:{startTime:d()().startOf("day").format("YYYY-MM-DD HH:mm:ss"),endTime:d()().format("YYYY-MM-DD HH:mm:ss")},filterObj:{formaldehyde:"甲醛",temperature:"温度",humidity:"湿度",PM25:"PM2.5",CO2:"CO2",TVOC:"TVOC"},positionInfo:{}}},created:function(){this.positionId=this.$route.params.id,this.projectId=this.$route.query.project_id,this.getNewPositionData(this.positionId),this.getMarkline()},mounted:function(){this.lineChart=o.a.init(this.$refs.lineChart)},methods:{initLineChart:function(e){var t={formaldehyde:"甲醛",PM25:"PM2.5",TVOC:"TVOC",CO2:"CO2",temperature:"温度",humidity:"湿度"},a=[{name:this.filterObj[this.activeType],type:"line",symbol:"circle",symbolSize:6,itemStyle:{color:"#71429e"},areaStyle:{color:new o.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#71429e"},{offset:1,color:"rgba(14,17,50,0.7)"}])},data:e.series[0].data}];if("formaldehyde"===this.activeType||"TVOC"===this.activeType){var i={symbol:"none",silent:!0,label:{show:!0,position:"end",distance:3,formatter:function(e){return"".concat(e.name,"参考线：").concat(e.value)}},lineStyle:{color:"#ddab53",width:2},data:[{yAxis:this.markLine[this.activeType]||0,name:t[this.activeType]}]};a[0].markLine=i}var s={tooltip:{trigger:"axis"},legend:{selectedMode:!1,orient:"vertical",left:"right",top:"center",align:"left",textStyle:{color:"#fff"}},grid:{left:"1%",right:"12%",bottom:"14%",top:"8%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,axisLine:{show:!1,lineStyle:{color:"#727691"}},axisTick:{show:!1},data:e.xAxis},yAxis:{type:"value",axisLine:{show:!1,lineStyle:{color:"#727691"}},splitLine:{lineStyle:{color:"#3e425d"}},axisTick:{show:!1}},series:a,dataZoom:[{startValue:e.xAxis[e.xAxis.length-100]},{type:"inside"}]};this.lineChart.setOption(s)},getMarkline:function(){var e=this;Object(m["a"])(this.ajaxUrl.projectsInfo+this.projectId,{},"get").then((function(t){e.markLine.formaldehyde=t.hcho,e.markLine.TVOC=t.tvoc,e.getPositionDatas()})).catch((function(e){console.log(e)}))},getNewPositionData:function(e){var t=this;return Object(m["a"])(this.ajaxUrl.getNewPositionData,{monitorId:e},"get").then((function(e){var a=JSON.parse(JSON.stringify(t.typeList));t.positionInfo={project_name:e.project.name,area_name:e.area.area_name,position_name:e.position.name,tag:e.position.tag};var i=e.data[0];t.typeList=a.map((function(e,t){return e.value=i[e.type],e.tag=i[e.type+"_tag"],e}))})).catch((function(e){console.log(e)}))},handleFilterChange:function(e,t){this.searchTime=b({},t),this.activeType=e,this.lineChart.clear(),this.getPositionDatas()},getPositionDatas:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.chartDataLoading=!0,e.next=3,Object(m["a"])(this.ajaxUrl.positionDatas,{type:2,monitorId:this.positionId,startTime:this.searchTime.startTime,endTime:this.searchTime.endTime},"get");case 3:t=e.sent,a=t.body.list.reverse(),this.initLineChart(Object(p["g"])(this.activeType,[this.positionId],[a])),this.chartDataLoading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},components:{gaugeChart:f["a"],largePieChart:h["a"],largeFilterBox:u["a"]}},v=g,y=(a("b0d0"),a("9ca4")),C=Object(y["a"])(v,i,s,!1,null,"f22de69a",null);t["default"]=C.exports}}]);