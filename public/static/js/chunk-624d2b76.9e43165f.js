(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-624d2b76"],{"0322":function(e,t,a){"use strict";var l=a("17ab"),s=a.n(l);s.a},"08d1":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setWarning"},[a("div",{staticClass:"project-name"},[a("span",[e._v("项目名称")]),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",disabled:""},model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}})],1),e._v(" "),a("div",{staticClass:"tableContent"},[a("el-table",{staticClass:"header-border td-input",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",align:"left",label:"项目阶段"}}),e._v(" "),a("el-table-column",{attrs:{prop:"standard",align:"left",label:"检测标准"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"甲醛"}},[a("el-table-column",{attrs:{align:"left",label:"合格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",disabled:""==t.row.formaldehyde.pass},model:{value:t.row.formaldehyde.pass,callback:function(a){e.$set(t.row.formaldehyde,"pass",a)},expression:"scope.row.formaldehyde.pass"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"污染",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",disabled:""==t.row.formaldehyde.fail},model:{value:t.row.formaldehyde.fail,callback:function(a){e.$set(t.row.formaldehyde,"fail",a)},expression:"scope.row.formaldehyde.fail"}})]}}])})],1),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"TVOC"}},[a("el-table-column",{attrs:{align:"left",label:"合格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",disabled:""==t.row.TVOC.pass},model:{value:t.row.TVOC.pass,callback:function(a){e.$set(t.row.TVOC,"pass",a)},expression:"scope.row.TVOC.pass"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"污染",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",disabled:""==t.row.TVOC.fail},model:{value:t.row.TVOC.fail,callback:function(a){e.$set(t.row.TVOC,"fail",a)},expression:"scope.row.TVOC.fail"}})]}}])})],1),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"pm2.5"}},[a("el-table-column",{attrs:{align:"left",label:"合格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",disabled:""==t.row.PM25.pass},model:{value:t.row.PM25.pass,callback:function(a){e.$set(t.row.PM25,"pass",a)},expression:"scope.row.PM25.pass"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"污染",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",disabled:""==t.row.PM25.fail},model:{value:t.row.PM25.fail,callback:function(a){e.$set(t.row.PM25,"fail",a)},expression:"scope.row.PM25.fail"}})]}}])})],1),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"co2"}},[a("el-table-column",{attrs:{align:"left",label:"合格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",disabled:""==t.row.CO2.pass},model:{value:t.row.CO2.pass,callback:function(a){e.$set(t.row.CO2,"pass",a)},expression:"scope.row.CO2.pass"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"污染",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",disabled:""==t.row.CO2.fail},model:{value:t.row.CO2.fail,callback:function(a){e.$set(t.row.CO2,"fail",a)},expression:"scope.row.CO2.fail"}})]}}])})],1),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"温度"}},[a("el-table-column",{attrs:{align:"left",label:"合格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",disabled:""==t.row.temperature.pass},model:{value:t.row.temperature.pass,callback:function(a){e.$set(t.row.temperature,"pass",a)},expression:"scope.row.temperature.pass"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"污染",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",disabled:""==t.row.temperature.fail},model:{value:t.row.temperature.fail,callback:function(a){e.$set(t.row.temperature,"fail",a)},expression:"scope.row.temperature.fail"}})]}}])})],1),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"湿度"}},[a("el-table-column",{attrs:{align:"left",label:"合格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",disabled:""==t.row.humidity.pass},model:{value:t.row.humidity.pass,callback:function(a){e.$set(t.row.humidity,"pass",a)},expression:"scope.row.humidity.pass"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"污染",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small",disabled:""==t.row.humidity.fail},model:{value:t.row.humidity.fail,callback:function(a){e.$set(t.row.humidity,"fail",a)},expression:"scope.row.humidity.fail"}})]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"setWarning-btn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSave}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.handleCancel}},[e._v("取消")])],1)])},s=[],o=(a("5ab2"),a("06a2"),a("200d")),n=a("4f54"),r=(a("6d57"),a("e10e"),a("f548"),a("9a33"),a("cc57"),a("b775"));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"setWarning",data:function(){return{projectName:"",projectInfo:{},projectId:"",tableData:[]}},created:function(){this.projectId=this.$route.params.id,this.getProjectInfo()},methods:{getProjectInfo:function(){var e=this;Object(r["a"])(this.ajaxUrl.projectsInfo+this.projectId,{},"get").then((function(t){e.resizeDataLeading(t.stages),e.projectInfo=t,e.projectName=t.name})).catch((function(e){console.log(e)}))},resizeDataLeading:function(e){var t=this,a=e.map((function(e){var a={},l=e.thresholds,s=e.pro_thresholdinfo?JSON.parse(e.pro_thresholdinfo):JSON.parse(l.thresholdinfo);return a.name=e.stage_name,a.standard=l.name,a.id=e.id,t.publicObj.defaultThreshold.map((function(e){a[e.type]={pass:s[e.type]?s[e.type].split("~")[0]:"",fail:s[e.type]?s[e.type].split("~")[1]:""}})),a}));this.tableData=a},handleCancel:function(){this.$router.replace({name:"earlyWarning"})},initPromiseArr:function(e,t){for(var a=this,l=[],s=function(s,o){var i="",u="",f={},p="",d=e[s].pro_thresholds_id,b={};Object.keys(t[s]).map((function(e){var a=t[s][e];"object"===Object(n["a"])(a)&&""!==a.pass&&""!==a.fail&&(b[e]=a.pass+"~"+a.fail)})),p=JSON.stringify(b),d?(i=a.ajaxUrl.addProjectsWarning+a.projectId+"/thresholds/"+d,u="patch",f.thresholdinfo=p):(i=a.ajaxUrl.addProjectsWarning+a.projectId+"/thresholds",u="post",f.thresholdinfo=p,f.stage_id=e[s].id),l.push(Object(r["a"])(i,c({},f),u))},o=0,i=e.length;o<i;o++)s(o,i);return l},handleSave:function(){var e=this;Promise.all(this.initPromiseArr(this.projectInfo.stages,this.tableData)).then((function(t){e.$message.success("设置成功"),setTimeout((function(){e.$router.replace({name:"earlyWarning"})}),500)})).catch((function(e){console.log(e)}))}}},f=u,p=(a("0322"),a("9ca4")),d=Object(p["a"])(f,l,s,!1,null,"c63f4d78",null);t["default"]=d.exports},"17ab":function(e,t,a){},"4f54":function(e,t,a){"use strict";function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}a.d(t,"a",(function(){return l}))}}]);